#!/bin/bash

# secretlint (npm package)
npx lint-staged

# gitleaks (binary with fallback)
if [ -x "./bin/gitleaks" ]; then
  ./bin/gitleaks protect --staged --config gitleaks.toml
elif command -v gitleaks &> /dev/null; then
  gitleaks protect --staged --config gitleaks.toml
else
  echo "⚠️  gitleaks not found. Run: npm run gitleaks:install"
  exit 1
fi
