# 申し送り（2025-11-16 00:36:29）

## 🔔 Compact前チェックリスト

### トークン使用量の目安
トークン予算の**75-85%**を超えたら申し送り作成を検討しましょう。

- **75%超**: 余裕を持って検討開始
- **85%超**: 早急に申し送り作成
- **100%**: auto compactが発火（文脈が失われる前に記録を！）

> 💡 **トークン使用量の確認方法**
> 会話中に表示される `Token usage: X/Y; Z remaining` を参照
> 例: Claude Codeの場合は予算200,000トークン

### 記録すべき内容を確認
- [x] 現在のセッションで決定した重要事項を記録したか？
- [x] 議論の流れと理由を記録したか？
- [x] 次のセッションで必要な「文脈」「空気感」を言語化したか？
- [x] 技術的な決定の「なぜ」を明記したか？
- [x] 注意事項に新しい学びを追加したか？

---

## 現在の状況

### ✅ 完了

- [x] **申し送り運用の課題整理**
  - notes/letters が100件以上蓄積され高精度な記憶追跡が可能に
  - しかし申し送り時の必須事項（命名規則、コミット方針等）が漏れやすい
  - 新Claudeセッションで運用ルールが継承されない問題を特定

- [x] **次セッション用定型文の設計**
  - TEMPLATE.md に「📋 申し送り作成完了時の通知例」セクション追加
  - 運用ルール（notes/letters命名規則、コミット方針）を定型文に埋め込み
  - `@` 記号は含めず（将来的に使えなくなる可能性を考慮）
  - 「日本語で」を含めて言語設定も明確化

- [x] **current_create_letter.md の詳細化**
  - 4ステップ → 12ステップに詳細化
  - 各ステップで「相談」「承認」フローを明示
  - `**太字**` を削除してAI向けに最適化
  - README/TEMPLATE参照によるメンテナンス性向上

- [x] **全パターンへの反映**
  - TEMPLATE.md: 4ファイル更新
  - current_create_letter.md: 4ファイル更新
  - patterns/docs-structure
  - patterns/docs-structure-for-target-branch-only
  - patterns/actions-pattern
  - patterns/writing-collaborate
  - docs/ (このリポジトリ自身)

- [x] **知見ノートの作成**
  - `85_handoff-workflow-improvement-with-session-prompt.md` 作成
  - 問題・試行錯誤・解決策・学びを体系的に記録

- [x] **コミット・プッシュ**
  - ノートコミット: 8581832
  - テンプレートファイル更新: 8a9147f
  - アクションファイル更新: 4c4b116

### 🚧 進行中

なし（すべて完了）

### 📋 未着手

- [ ] **実際の運用テスト**（前回申し送りから継続）
  - 次セッションで定型文を実際に使用してみる
  - 運用ルールが正しく継承されるか確認
  - 優先度: 高

- [ ] **patterns/server-management/ の作成**（前々回から継続）
  - README.mdに記載されているが未実装
  - 優先度: 低

---

## 次にやること

### 最優先

1. **次セッションでの運用テスト**
   - 今回作成した定型文を実際に使用
   - 運用ルールが継承されるか検証
   - フィードバック収集

### 次に

2. **他のプロジェクトへの展開**
   - この改善を他のプロジェクトにも適用
   - 実践的なフィードバック収集

3. **パターンの実用テスト**
   - ワンショット指示のテスト
   - degit の動作確認

---

## 注意事項

### 今回確立した運用改善

**次セッション用定型文の構造:**
```
docs/letter/YYYY-MM-DD-HH-MM-SS.md を日本語で。

このプロジェクトの運用ルール:
- 知見は docs/notes/ (命名: 連番-{title}.md、作成時 README/TEMPLATE参照)
- 申し送りは docs/letter/ (このファイル、作成時 README/TEMPLATE参照)
- コミット: このリポジトリが公開の場合はClaude痕跡（署名・絵文字）なしで、プライベートの場合はClaude痕跡ありでOK
```

**重要なポイント:**
- `@` は含めない（ユーザーが必要に応じて手入力）
- 「日本語で」で言語設定を明確化
- 運用ルールを毎回伝えることで継承を確実に

### 12ステップの申し送りフロー

1. 最新2件の申し送りを確認
2. プロジェクト固有情報の把握
3. ノート作成方針の相談
4. ノートの作成
5. ノートコミットのルール把握とコミットログ方針の相談
6. ノートのコミット・プッシュ
7. 開発コミット計画の提示
8. 開発内容のコミット・プッシュ
9. 申し送りの作成
10. 申し送りコミットのコミットログ方針の相談
11. 申し送りのコミット・プッシュ
12. 申し送り作成完了の通知

**特徴:**
- 各ステップで人間への「相談」「承認」を明示
- AIが勝手に進めない設計
- README/TEMPLATE参照でメンテナンス性確保

---

## 技術的な文脈

### プロジェクト固有の起動・テスト方法

本プロジェクトには特定の起動スクリプトやテスト手法はありません。

**基本的な操作:**
- **配布方法**: degit による配布
- **開発手法**: AI協働開発（Claude Code）
- **ドキュメント管理**: docs/ 構造
- **バージョン管理**: Git/GitHub（公開リポジトリ）

### 使用した技術

- **Markdown**: ドキュメント形式
- **Git**: バージョン管理
- **GitHub**: リモートリポジトリ（1ft-seabass/my-ai-collaboration-patterns）
- **degit**: パターン配布

### 今回の変更箇所

```
docs/
├── letter/
│   └── TEMPLATE.md                                   # 更新 ✨
├── actions/
│   └── current_create_letter.md                      # 更新 ✨
└── notes/
    └── 85_handoff-workflow-improvement-with-session-prompt.md  # 新規 ✨

patterns/
├── docs-structure/
│   └── templates/
│       ├── letters/TEMPLATE.md                       # 更新 ✨
│       └── actions/current_create_letter.md          # 更新 ✨
├── docs-structure-for-target-branch-only/
│   └── templates/docs/
│       ├── letters/TEMPLATE.md                       # 更新 ✨
│       └── actions/current_create_letter.md          # 更新 ✨
├── actions-pattern/
│   └── templates/actions/
│       └── current_create_letter.md                  # 更新 ✨
└── writing-collaborate/
    └── templates/letters/
        └── TEMPLATE.md                               # 更新 ✨
```

### 重要なコミット

1. `8581832` - docs: 申し送りワークフローの改善（次セッション用定型文の追加）- ノート作成
2. `8a9147f` - docs: letter/TEMPLATE.md に次セッション用定型文を追加
3. `4c4b116` - docs: current_create_letter.md を12ステップの詳細フローに拡充

---

## セッション文脈サマリー

### 核心的な設計決定

- **決定事項**: 申し送り完了時に次セッション用定型文をユーザーに提示する方式
  - 理由: ファイルを増やさず、AI挙動依存を避け、人間が明示的に操作できる
  - 影響範囲: 全パターン（6箇所）+ このリポジトリ自身

- **決定事項**: 12ステップの詳細フローで人間の承認を明示
  - 理由: AIが勝手に進めず、各段階で対話しながら進める必要がある
  - 影響範囲: current_create_letter.md（4箇所）

### 議論の流れ

1. **最初の問題認識**: 申し送り時の必須事項が漏れやすく、運用ルールが継承されない
2. **検討したアプローチ**:
   - A: COLLABORATION.md 作成（AI挙動依存で不採用）
   - B: letters/README.md 統合（汎用性低下で不採用）
   - C: 次セッション用定型文の提示（採用）
3. **最終決定**: TEMPLATE.md に通知例セクションを追加し、Claudeが定型文を提示する方式
4. **残った課題**: 実際の運用テストが未実施

### 次のセッションに引き継ぐべき「空気感」

- **このプロジェクトの優先順位**: 運用の安定性・継続性を最重視
- **避けるべきアンチパターン**: AI挙動依存、自動化への過度な期待
- **重視している価値観**: 人間が明示的に操作できること、メンテナンス性
- **現在の開発フェーズ**: 運用改善フェーズ（基本構造は確立済み）

---

## 変更履歴
- 2025-11-16: 申し送り運用改善（次セッション用定型文の導入）
- 2025-11-16: current_create_letter.md を12ステップに詳細化
- 2025-11-16: 知見ノート 85 作成

---

**作成日時**: 2025-11-16 00:36:29
**作成者**: Claude Code + User (1ft-seabass)
