---
tags: [mcp, design-validation, token-analysis, ux, cognitive-load]
---

# MCP の価値分析と設計検証 - 申し送り後の考察

> **⚠️ 機密情報保護ルール**
>
> このノートに記載する情報について:
> - API キー・パスワード・トークンは必ずプレースホルダー(`YOUR_API_KEY`等)で記載
> - 実際の機密情報は絶対に含めない
> - .env や設定ファイルの内容をそのまま転記しない

**作成日**: 2026-02-21
**関連タスク**: MCP 設計思想の検証と価値の再評価

## 問題

申し送り作成後のディスカッションで、以下の疑問が生じた：

1. **actions/*.md の強力さを実感した後の葛藤**
   - actions/00_session_end.md は「理解チェック」から始まり、極めて強力
   - このクオリティを MCP でも集約したいが、効く部分が弱いかもしれない

2. **トークン削減効果は本当にあるのか？**
   - MCP の価値として「トークン削減」を期待していたが実際は？
   - 検索系だけ効果があるのでは？

## 議論の流れ

### 1. actions/*.md の威力を確認

**実際に使ってみた感想:**

```
✅ 理解チェックが初手にある
   → 12個の手順を全部確認してから動く
   → 全体像を把握できる

✅ 承認フローが各所にある
   → 勝手に進まない
   → ユーザーと対話しながら確実に進める

✅ 具体的なコマンドが提示されている
   → `git log --oneline -10` など
   → 迷わず実行できる

✅ 完了通知のフォーマットが指定されている
   → 毎回同じ形式で出力できる
   → 次のセッションへの引き継ぎがスムーズ
```

**今回のセッションでの実績:**
- 2つのノート作成 → 提案して承認を得てから作成
- 3つのコミット → 計画を提示して承認を得てから実行
- 申し送り作成 → TEMPLATE を読んで構造を把握してから作成
- 完了通知 → 指定フォーマット通りに出力

**全て actions/00_session_end.md の手順通り！**

### 2. MCP で集約したいが、効く部分が弱いかもしれない

**悩ましい点:**

```
actions/*.md の強み:
├─ 理解チェック（初手で全体把握）← MCP では再現できない
├─ 段階的承認フロー               ← MCP では再現できない
├─ 具体的な手順の記述             ← MCP では返せるが、効果は同じ？
└─ 完了通知フォーマット           ← MCP では返せるが、効果は同じ？

MCP で返しても、Claude が:
❌ 理解チェックをスキップする？
❌ 承認を求めずに進める？
❌ 手順を飛ばす？

可能性がある。
```

**つまり:**
- MCP から actions/*.md を返しても、Claude がそれを「ちゃんと読む」とは限らない
- `@actions/00_session_end.md` で明示的に呼ぶ方が確実かもしれない

### 3. トークン削減効果の分析

#### 検索系のトークン削減効果

**従来の方法（Bash + grep）:**
```bash
grep -r "keyword" docs/notes/
→ 結果が大量に返ってくる（数千行）
→ Claude がそれを全部読む
→ トークン消費: 大
```

**MCP 検索系:**
```typescript
search_docs_content("keyword", "notes")
→ 結果を最大30件に制限
→ フォーマット済みで返す
→ トークン消費: 中
```

**削減効果: △（少しある）**

#### guide 系（アクション系）のトークン削減効果

**従来の方法:**
```
Read で actions/00_session_end.md を読む
→ ファイル内容全体
→ トークン消費: 中
```

**MCP guide 系:**
```
guide_session_end を実行
→ actions/00_session_end.md + recent_notes + recent_letters
→ トークン消費: 中〜大
```

**削減効果: ❌（むしろ増える可能性）**

#### guide 系（作成系）のトークン削減効果

**従来の方法:**
```
Read で TEMPLATE.md を読む
→ ファイル内容全体（ガイド含む）
→ トークン消費: 中
```

**MCP guide 系:**
```
guide_note_creation を実行
→ TEMPLATE.md（ガイド削除済み）
→ suggested_filepath も生成
→ トークン消費: 小〜中
```

**削減効果: ○（少しある）**

### 4. 結論: MCP の真の価値

**トークン削減効果まとめ:**

| ツール種類 | トークン削減効果 |
|-----------|-----------------|
| 検索系 | △ 少しある |
| guide 系（アクション系） | ❌ むしろ増える可能性 |
| guide 系（作成系） | ○ 少しある |

**つまり:**
- トークン削減は「主目的ではない」
- 検索系で少しある程度

**MCP の真の価値（再確認）:**

1. **認知負荷の軽減**（脳内インデックス不要）← **これが最大の価値**
2. **UX の向上**（ファイルパス不要）
3. **検索の便利さ**（スコープ絞り込み、フォーマット済み）

**重要な洞察:**
> 「トークン削減のための MCP」ではなく
> 「ユーザー体験向上のための MCP」

## 解決策: 現実的な落とし所

### 提案: ハイブリッド運用（両方残す）

**actions/*.md を主、MCP を従として使い分ける**

```
セッション終了したい時:

方法1（確実）: @actions/00_session_end.md を指定
            → 理解チェックから始まる
            → 確実に動く
            → actions/*.md の威力を最大限活用

方法2（便利）: 「セッション終了したい」と指示
            → Claude が guide_session_end を呼ぶ（期待）
            → ファイルパス不要
            → ただし、理解チェックをスキップする可能性
```

**使い分けの指針:**

| 場面 | 推奨方法 | 理由 |
|------|---------|------|
| セッション終了 | `@actions/00_session_end.md` | 確実性重視 |
| ノート作成 | `@actions/doc_note.md` | 確実性重視 |
| コミット | `@actions/git_commit.md` | 確実性重視 |
| 検索作業 | MCP ツール | 便利さ重視 |
| ファイルパス忘れた時 | MCP ツール（補助） | UX 向上 |

### 両方残すメリット

1. **柔軟性**: ユーザーが状況に応じて使い分けられる
2. **確実性**: `@actions/...` で確実に動く選択肢を残す
3. **便利さ**: MCP でファイルパスを覚えなくて良い選択肢も提供
4. **独立性**: actions/*.md が MCP に依存しない

## 学び

### 1. プロンプト設計の威力

**actions/*.md の「理解チェック」が初手にあることの効果は絶大**

- 全体像を把握してから動ける
- 段階的な承認フローが自然に機能する
- 手順を飛ばさずに確実に進められる

**この威力は MCP では再現できない:**
- MCP から同じ内容を返しても、Claude が「理解チェック」として認識するとは限らない
- `@actions/...` で明示的に呼ぶ方が、Claude が「これは重要な手順書だ」と認識しやすい

### 2. トークン削減は副次的な効果

**当初の期待:**
- MCP でトークン削減できる！

**実際:**
- 検索系で少し削減できる程度
- guide 系（アクション系）はむしろ増える可能性
- guide 系（作成系）は少し削減できる

**本質的な価値:**
- トークン削減 < ユーザー体験向上（認知負荷軽減）

### 3. 「脳内インデックスの外部化」の意義

**従来:**
```
セッション終了 → actions/00_session_end.md
ノート作成   → actions/doc_note.md
コミット     → actions/git_commit.md
```
これらの対応関係を**ユーザーが覚えている必要があった**

**MCP 導入後:**
```
「セッション終了したい」→ guide_session_end（期待）
「ノート作りたい」    → guide_note_creation（期待）
「コミットしたい」    → guide_git_commit（期待）
```
ファイルパスを**覚えなくて良い**

**ただし:**
- Claude が実際に自発的に呼ぶかは次のセッションで検証必要
- 呼ばなかったとしても、「ファイルパスを忘れた時の補助」として価値がある

### 4. 両方残すことの正しさ

**当初の懸念:**
- 「guide 系は価値が低いので削除すべきでは？」

**再評価後:**
- 「脳内インデックスの外部化」という価値を発見
- actions/*.md の独立性を保つため、MCP に依存させない
- **両方残すことで柔軟性を確保**

**重要な原則:**
- 上位（自然言語プロンプト）は下位（MCP）に依存しない
- 下位は上位を補助する
- 複数の選択肢を残す

## 今後の検証課題

### 次のセッションでの検証項目

1. **Claude が guide 系を自発的に呼ぶか？**
   - 「セッション終了したい」→ guide_session_end を呼ぶか？
   - 「ノート作りたい」→ guide_note_creation を呼ぶか？

2. **呼んだ場合、理解チェックを表示するか？**
   - MCP から返した内容を「手順書」として認識するか？
   - それとも単なる「情報」として流すか？

3. **呼ばなかった場合の改善策**
   - description を強化（「『セッション終了』と言われたらこのツールを呼ぶ」）
   - ただし actions/*.md は変更しない（独立性を保つ）

### 長期的な観察ポイント

1. **実際の使い分けパターン**
   - ユーザーが `@actions/...` と MCP をどう使い分けるか
   - どちらがより自然に使われるか

2. **トークン削減の実測値**
   - 実際にトークン使用量がどの程度変化するか
   - 検索系の効果は本当にあるか

3. **認知負荷の変化**
   - ファイルパスを覚える負担が実際に減ったか
   - ユーザー体験は向上したか

## 関連ドキュメント

- [MCP Guide ツール実装](./2026-02-21-08-50-00-mcp-guide-tools-implementation.md) - 実装詳細
- [脳内インデックス外部化の思想](./2026-02-21-08-51-00-mcp-as-mental-index-externalization.md) - 設計思想
- [申し送り: MCP guide 系ツール実装完了](../letters/2026-02-21-09-46-00-mcp-guide-tools-complete.md)

---

**最終更新**: 2026-02-21
**作成者**: Claude Sonnet 4.5
