---
tags: [mcp, design-philosophy, point-and-line, cognitive-load, architecture]
---

# 点と線の分離 - MCP 設計思想

> **⚠️ 機密情報保護ルール**
>
> このノートに記載する情報について:
> - API キー・パスワード・トークンは必ずプレースホルダー(`YOUR_API_KEY`等)で記載
> - 実際の機密情報は絶対に含めない
> - .env や設定ファイルの内容をそのまま転記しない

**作成日**: 2026-02-21

## 核心的な気づき

MCP ツールの実装と運用を通じて、以下の構造が見えた：

- **点**: 入力が決まれば出力が決まる。命名規則、テンプレート取得、grep 検索、パスサジェスト。MCP の固定ロジックに逃がせる
- **線**: 理解チェック→承認フロー→セキュリティチェック→実行→完了通知。actions/*.md が自然言語で制御する一連のフロー。MCP に逃がしてもトークンは減らない

**この発見が意味すること**: MCP に何を載せるかの判断基準が「できること」から「効くこと」に変わった。

## actions/*.md の自然言語品質を最大限活かす

actions/*.md の自然言語クオリティは自己採点90点以上。この品質は AI に `@` 参照で通しで読ませてこそ発揮される。

**従来の問題**:
- MCP のツール返り値として actions/*.md の中身を渡すと「情報」になってしまう
- 理解チェックの初手配置、承認ポイントの密度、完了通知による次セッション接続までの設計が機能しない
- 90点が70点に落ちる

**解決策**:
- MCP は actions/*.md の中身には触らない
- パスのサジェストのみを担当
- AI が `@` 参照で通しで読む経路を維持

## 脳内インデックスの外部化

### 従来の方法（MCP なし）

```
ユーザー: 「セッション終了したい」
       ↓ ユーザーが覚えている必要がある
       ↓ セッション終了 = actions/00_session_end.md
ユーザー: 「@actions/00_session_end.md を見て」
```

**認知負荷**: ファイルパスを覚える必要がある

### MCP による解決

```
ユーザー: 「セッション終了したい」
       ↓ Claude が navigate ツールを自動で呼ぶ
Claude: [navigate ツールを呼ぶ]
       ↓ actions/00_session_end.md を返す
       ↓ AI が @ 参照で読みに行く
```

**認知負荷**: ゼロ。ファイルパスを覚えなくて良い

### MCP の3つの価値

1. **検索系** - grep/find の代替（search_docs_titles, search_docs_content）
2. **アクション系** - **脳内インデックスの代替**（navigate）← これが今回の新しい価値
3. **作成系** - ファイル名生成 + 日本語検証 + 脳内インデックスの代替（将来的に）

## 上位は下位に依存しない

**原則**:
- actions/*.md（上位・自然言語）は MCP（下位）の存在を知らない
- MCP がなくても `@actions/00_session_end.md` で動く
- MCP は便利のための補助レイヤー

**理由**:
- 上位レイヤーに下位レイヤーの仕様を流出させない
- 両方の選択肢を残すことで柔軟性を保つ
- 将来的に MCP がなくなっても actions/*.md は機能し続ける

**具体例**:
- ❌ actions/*.md に「`navigate` ツールを呼べ」と書く → MCP に依存してしまう
- ✅ actions/*.md は MCP がなくても機能する → 自然言語プロンプトとして完結

## help の新しい役割

README とは視座が違う。README は仕組みの中にいる人向けの説明。help は「半階上」から見下ろす視座で、仕組みの全体像を伝える。

**help が返す内容**:
- docs フォルダの構成と各ディレクトリの役割
- 動かしたいときに使うツール（具体的なパスと説明付き）
- よく使う指示書のフルパス一覧

**効果**:
- README では見えない「動かし方」を案内
- クライアント案件に展開したとき、田中さんがいなくても仕組みが自己説明できる
- お守りの説明書がお守り自体に内蔵されている状態

## B フォーカスと C/A への橋

**B（自分専用）フォーカス**:
- Claude Code + 自分の環境で動けばいい
- `@` 参照の挙動は Claude Code 前提で設計

**C（クライアント適用）への橋**:
- help の充実が担う
- B で磨いた結果を持ち込む形

**A（他者展開）への橋**:
- help が自己説明的になることで、仕組みが独り立ちできる

## 今回の方向転換自体の意味

当初: 「MCP でトークンを削減する」→ 14ツールに膨らむ
転換: 「点と線」の発見 → 線は自然言語に任せる
着地: 「MCP はパスサジェストと検索だけ」→ 6ツール

**MCP に何を載せるかの判断基準の変化**:
- できるけど効かないもの（guide 系のファイル内容仲介）を捨てる
- 少ないけど確実に効くもの（パスサジェスト、検索、自己説明）に絞る

## 設計原則のまとめ

1. **点と線を分離する**: MCP は点に徹し、線は自然言語に任せる
2. **actions/*.md の自然言語品質を最大限活かす**: `@` 参照で通しで読ませる経路を維持
3. **上位は下位に依存しない**: actions/*.md は MCP を知らない
4. **脳内インデックスを外部化する**: ファイルパスを覚えなくて良い
5. **help を自己説明的にする**: README では見えない「動かし方」を案内

## 今後の進化の方向性

**docs-structure が進化したら MCP も追従**:
- actions/ に新しい指示書が増えたら → navigate のマッピングに追加するか判断
- よく使う指示書が変わったら → navigableActionPaths を更新
- help の説明を充実させる

**MCP の役割は明確**:
- 「脳内インデックスの外部化」
- 「具体的なやること案内」
- 「README では見えない実用的なガイド」

## 学び

1. **認知負荷の可視化**: 「何を覚える必要があるか」を意識することで、MCP の価値を正確に評価できる
2. **レイヤー間の依存関係**: 上位は下位に依存しない原則を守ることで、柔軟性が保たれる
3. **ツールの価値を「何を返すか」だけで判断しない**: 「どう使われるか」まで含めて評価する
4. **性急に削除しない**: 再評価の機会を逃さない

## 関連ドキュメント

- [実装詳細のノート](./2026-02-21-12-15-00-mcp-6-tools-refactoring.md)
- [方向性整理メモ](../memos/2026-02-21-docs-structure-mcp-direction.md)（ユーザー提供）

---

**最終更新**: 2026-02-21
**作成者**: Claude Sonnet 4.5
