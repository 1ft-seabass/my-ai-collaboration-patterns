---
tags: [mcp, design-philosophy, cognitive-load, mental-index, ux]
---

# MCP を脳内インデックスの外部化として捉える - 設計思想

> **⚠️ 機密情報保護ルール**
>
> このノートに記載する情報について:
> - API キー・パスワード・トークンは必ずプレースホルダー(`YOUR_API_KEY`等)で記載
> - 実際の機密情報は絶対に含めない
> - .env や設定ファイルの内容をそのまま転記しない

**作成日**: 2026-02-21
**関連タスク**: docs-structure MCP サーバーの設計思想確立

## 問題

docs-structure MCP サーバーに guide 系ツールを実装する際、以下の疑問が生じた：

1. **actions/*.md を MCP で返す価値はあるのか？**
   - Claude は `@actions/00_session_end.md` で直接ファイルを読める
   - MCP 経由で返しても `{ guide: "ファイル内容" }` を返すだけ
   - 検索系ツール（grep/find の代替）と比べて価値が低いのでは？

2. **上位レイヤーへの仕様流出を避けるべきか？**
   - actions/*.md に「`guide_session_end` ツールを呼べ」と書くと MCP に依存する
   - 自然言語プロンプトとして完結すべきでは？

## 議論の流れ

### 初期の認識: 検索系が価値の中心

**MCP ツールの価値を3つに分類:**

1. **検索系**: ✅ 明確に価値がある
   - `search_docs_content` - grep の代替
   - `search_docs_titles` - ファイル名検索
   - `list_letters` - 申し送り一覧

2. **作成系**: △ 少し便利
   - ファイル名自動生成
   - 日本語タイトル検証

3. **アクション系**: ❓ 価値が不明
   - actions/*.md を返すだけ
   - Read ツールで読むのと同じでは？

### 転換点: 脳内インデックスの外部化

**ユーザーからの気づき:**

> 「MCP で、アットマークなファイル名指定が脳内に入ってないと動かせない状況を脱せるかもしれないという萌芽はあるわけで、いわゆる、脳内のインデクスを MCP でできないか。」

**これにより、アクション系 MCP ツールの価値が明確になった:**

```
❌ 従来の方法（脳内インデックスが必要）
ユーザー: 「セッション終了したい」
       ↓ ユーザーが対応関係を覚えている必要がある
       ↓ セッション終了 = actions/00_session_end.md
ユーザー: 「@actions/00_session_end.md を見て」
       ↓
Claude: ファイルを読んで手順に従う

✅ MCP による解決（脳内インデックス不要）
ユーザー: 「セッション終了したい」
       ↓ Claude が自発的にツールを選ぶ
Claude: [guide_session_end ツールを呼ぶ]
       ↓
       actions/00_session_end.md を取得
       ↓
       手順に従う
```

## 設計思想の確立

### レイヤー構造の整理

```
┌─────────────────────────────────────┐
│  上位: actions/*.md (自然言語)      │
│  - 理解チェック                      │
│  - 段階的承認フロー                  │
│  - 具体的な実行手順                  │
│  - MCP の有無に関わらず機能する     │
└─────────────────────────────────────┘
              ↓ 利用する（依存しない）
┌─────────────────────────────────────┐
│  下位: MCP ツール                    │
│  - TEMPLATE.md の読み込み           │
│  - ファイル名の自動生成              │
│  - 直近ノート/申し送りの取得        │
│  - 脳内インデックスの代替           │  ← 重要！
└─────────────────────────────────────┘
```

### MCP の3つの価値（再定義）

1. **検索系** - grep/find の代替
   - スコープ絞り込み
   - フォーマット済み結果

2. **アクション系** - **脳内インデックスの代替** ← 新しい価値
   - ファイルパスを覚える必要がない
   - 自然言語から適切なツールを選択
   - 「セッション終了したい」→ `guide_session_end`

3. **作成系** - ファイル名生成 + 脳内インデックスの代替
   - 命名規則の自動適用
   - 日本語タイトル検証

### 重要な原則

**1. actions/*.md の独立性を保つ**

- ❌ actions/*.md に「`guide_session_end` ツールを呼べ」と書く
- ✅ actions/*.md は MCP がなくても機能する
- ✅ MCP は補助的な存在として利用する

**2. 仕様の流出を避ける**

- 上位（自然言語プロンプト）に下位（MCP）の仕様を書かない
- MCP がなくても動く設計を保つ

**3. 両方の選択肢を残す**

- 方法1: `@actions/00_session_end.md` で直接呼ぶ（従来）
- 方法2: 「セッション終了したい」と指示して MCP に委譲（新）

## 学び

### 1. 認知負荷の可視化

**従来の方法で必要だった脳内インデックス:**
- セッション終了 → `actions/00_session_end.md`
- ノート作成 → `actions/doc_note.md`
- コミット → `actions/git_commit.md`
- プッシュ → `actions/01_git_push.md`
- ノート＋コミット → `actions/doc_note_and_commit.md`
- 申し送り → `actions/doc_letter.md`
- タスク → `docs/tasks/TEMPLATE.md`

**ユーザーがこれらのパスを覚えている必要があった = 認知負荷**

### 2. MCP の真の価値は「認知負荷の軽減」

- grep の代替だけでなく、**インデックスの代替**も重要な価値
- ユーザーが「やりたいこと」を自然言語で伝えるだけで良い
- Claude が適切なツールを選んでファイルを読む

### 3. レイヤー間の依存関係の設計

- 上位レイヤー（自然言語）は下位レイヤー（MCP）に依存しない
- 下位レイヤーは上位レイヤーを補助する
- これにより柔軟性と保守性を両立

### 4. 削除判断の落とし穴

**初期の判断:**
「アクション系 MCP は価値が低いので削除すべき」

**再評価後の判断:**
「脳内インデックスの外部化として非常に価値がある！削除すべきでない」

**教訓:**
- ツールの価値は「何を返すか」だけでなく「何から解放されるか」でも測るべき
- 認知負荷の軽減は見えにくいが重要な価値

## 今後の課題

### 1. Claude がツールを自発的に呼ぶか？

**検証項目:**
- 「セッション終了したい」→ `guide_session_end` を呼ぶか？
- 「ノート作りたい」→ `guide_note_creation` を呼ぶか？
- 「コミットしたい」→ `guide_git_commit` を呼ぶか？

**もし呼ばない場合:**
- description を改善（「『セッション終了』と言われたらこのツールを呼ぶ」）
- ただし actions/*.md には手を入れない（独立性を保つ）

### 2. 検索系との連携

**例: セッション終了時の起動方法検索**

```
actions/00_session_end.md に記載:
「docs/notes/ から本プロジェクトでの基本的な起動方法を探す」

↓ これを MCP 化できないか？

search_docs_content(query: "起動", scope: "notes")
→ 結果を申し送りに自動記載
```

### 3. トークン削減効果の測定

**仮説:**
- MCP で TEMPLATE や actions を返すことで、Claude の Read ツール呼び出しが減る
- トークン使用量が減少する

**検証方法:**
- 次のセッションで実際に guide 系ツールを使って測定

## 関連ドキュメント

- [MCP Guide ツール実装](./2026-02-21-08-50-00-mcp-guide-tools-implementation.md) - 実装詳細
- [申し送り: MCP サーバー実装完了](../letters/2026-02-21-08-21-00-mcp-server-implementation-complete.md)

---

**最終更新**: 2026-02-21
**作成者**: Claude Sonnet 4.5
