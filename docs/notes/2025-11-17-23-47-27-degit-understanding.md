---
tags: [degit, npm, template, tooling, github]
---

# degit の挙動理解 - 開発記録

**作成日**: 2025-10-23
**関連タスク**: リポジトリ初期構築

## 問題

degit とは何か、どう使うべきか理解が曖昧だった。

### 背景
- 「degit で取得可能」という要件はあった
- 具体的にどう動作するのか不明確
- スクリプト実行ツールなのか、ファイルコピーツールなのか混乱

## 試行錯誤

### アプローチA: 複雑なスクリプトが必要？
**仮説**: degit はスクリプトを実行するツールで、セットアップスクリプトが必要

**結果**: 誤解

**理由**:
- degit は単純なファイルコピーツール
- スクリプト実行機能はない
- `.git` 履歴なしでファイルをコピーするだけ

---

### アプローチB: degit = ファイルコピー
**仮説**: GitHub の特定ディレクトリをそのままコピーするツール

**結果**: 正解

**実際の挙動**:
```bash
npx degit <username>/repo/path/to/dir ./target
```
- `path/to/dir` 配下のファイルを `./target` にコピー
- `.git` ディレクトリは含まれない
- GitHub から直接取得（git clone 不要）

## 解決策

### degit の正しい理解

**degit = シンプルなファイルコピーツール**

#### 使用例
```bash
# パターンのテンプレートをコピー
npx degit <username>/my-ai-collaboration-patterns/patterns/docs-structure/templates ./docs

# 結果：templates/ の中身が ./docs にコピーされる
```

#### メリット
- **シンプル**: git clone より軽量
- **履歴なし**: `.git` が含まれない
- **部分取得**: リポジトリの特定ディレクトリのみ取得可能

#### デメリット
- **静的コピーのみ**: スクリプト実行などはできない
- **更新追跡なし**: コピー後は元との関係が切れる

### 他のアプローチとの比較

| ツール | 方法 | 用途 |
|--------|------|------|
| **git clone** | リポジトリ全体をクローン | 開発に参加する場合 |
| **degit** | 特定ディレクトリをコピー | テンプレート取得 |
| **npm create** | スクリプト実行 + ファイル生成 | セットアップが必要な場合 |

### このリポジトリでの使い方

```bash
# ユーザーが実行するコマンド
npx degit <username>/my-ai-collaboration-patterns/patterns/docs-structure/templates ./docs

# 何が起こるか
# 1. GitHub から templates/ 配下を取得
# 2. ./docs にファイルをコピー
# 3. ユーザーはすぐに使える
```

## 学び

### 1. degit の本質
- **コピーツール**: それ以上でもそれ以下でもない
- **シンプルが正義**: スクリプトは不要
- **テンプレート配布に最適**: 使い方が簡単

### 2. 複雑なセットアップは逆効果
- claude-code-spec-workflow のようなスクリプト・グローバルコマンドは冗長
- ファイルリストで知見を体現する方が汎用的

### 3. プレースホルダー `<username>`
- リポジトリを汎用化するため
- 実際の GitHub ユーザー名に置換して使用
- ドキュメント内で一貫して使用

## 実装場所

- **README.md**: degit コマンド例を記載
- **SETUP.md**: degit の使い方を説明

## 今後の改善案

1. **実例の追加**: 実際に degit で取得した例のスクリーンショット
2. **トラブルシューティング**: よくあるエラーと解決方法

## 関連ドキュメント

- [パターン構造の設計](./02_pattern-structure-design.md)
- [ドッグフーディング実践](./03_repository-dogfooding.md)
- [SETUP.md](../../SETUP.md)

---

**最終更新**: 2025-10-23
**作成者**: Claude Code + User
