---
tags: [docs-structure, v1.1.0, design-decision, rationale]
---

# docs-structure v1.1.0 設計判断の記録 - なぜこの変更が必要だったか

## このノートの目的

v1.0.1 → v1.1.0 への移行で導入した各機能について、「なぜ必要だったか」「何を解決したかったか」を記録する。

---

## 変更1: notes/ の命名規則変更（連番 → タイムスタンプ）

### 何を変えたか
- 旧: `0001_degit-understanding.md`
- 新: `2025-11-17-23-47-27-degit-understanding.md`

### なぜ必要だったか

**理由1: スケーラビリティの限界**
- 連番は 0001〜9999 の範囲
- 現在25ノート → 将来250、1000ノートになる可能性
- 連番では管理が破綻する

**理由2: Git 履歴との対応**
- ノートがいつ作られたか Git ログを見ないとわからない
- タイムスタンプなら一目で作成日時がわかる
- セッション単位での振り返りが容易

**理由3: 検索性の向上**
- 「2025年11月に何をやったか」が ls だけでわかる
- 月別、日別でのフィルタリングが容易
- 時系列での開発の流れが追いやすい

### 導入後の効果
- ls で時系列が一目瞭然になった
- 連番管理のメンテナンスコストがゼロに
- **Git ログの同時刻コミット問題を秒ずらし対応で回避できている**
- **今後は手元でのタイムスタンプで記録することで、より正確な時系列性が保たれる**

---

## 変更2: letters/ にタイトル追加

### 何を変えたか
- 旧: `2026-02-01-14-00-00.md`
- 新: `2026-02-01-14-00-00-phase2-implementation-complete.md`

### なぜ必要だったか

**理由1: ファイル名だけで内容がわからない**
- タイムスタンプだけでは「何のセッションか」が不明
- ls や git log で見たときに判別できない
- README でリンクを貼るときに説明が必要

**理由2: 複数セッションの比較が困難**
- 「Phase 2 の申し送りどこだっけ？」と探す手間
- タイトルがあれば grep や ls で一発

**理由3: notes との命名規則統一**
- notes は `yyyy-mm-dd-hh-mm-ss-title.md`
- letters も同じ形式にすることで統一感

### 導入後の効果
- ls だけでセッション内容が把握できるようになった
- ファイル名で申し送りの内容が一目瞭然

---

## 変更3: FrontMatter（tags）の追加

### 何を変えたか
- 全ファイルの先頭に `tags: [...]` を追加

### なぜ必要だったか

**理由1: 付与情報の拡張性（最重要）**
- **これから様々な情報を付与しやすくなった**
- **まずは tags からスタート**
- 将来的に status、priority、category など追加可能

**理由2: トピック横断検索の実現**
- 「degit に関連するノート全部」を grep で一発検索
- 連番では関連性がわからない
- tags があればテーマ別にグループ化できる

**理由3: AI の文脈理解の向上**
- AI がファイルを読む前に tags で内容を把握
- 「このノートは何について書かれているか」が一目瞭然
- トークン削減に貢献（不要なファイルを読まない）

### 導入後の効果
- grep でのトピック検索が容易になった
- AI が関連ノートを素早く発見できるようになった

---

## 変更4: テンプレートの構造改善（ガイド集約）

### 何を変えたか
- 使い方を HTML コメント内に集約
- README とテンプレートの二重管理を解消

### なぜ必要だったか

**理由1: 情報の二重管理の排除**
- README.md と TEMPLATE.md で同じことを書いていた
- 更新時に両方を修正する手間
- 内容が乖離するリスク

**理由2: AI の勘違い防止**
- テンプレートの使い方と実際のテンプレートが混在
- AI が「どこから本体か」を誤解
- HTML コメントで明確に分離

**理由3: 単一責任の原則**
- README: インデックス、検索方法
- TEMPLATE: 使い方 + 実際のテンプレート
- 役割が明確になった

### 導入後の効果と期待
- テンプレート更新が楽になった
- **トークン削減によるコスト削減**
- **トークンが少ないお願い文により、AI がより正確に把握できる可能性**
- **スッキリした構造で理解しやすくなる期待**

---

## 変更5: 連番ファイルの時間ずらし処理（MIGRATION_GUIDE）

### 何を変えたか
- 同一 Git 時刻のファイル群を連番順に +1秒ずつずらす

### なぜ必要だったか

**理由1: タイムスタンプの重複回避**
- 同じ Git コミット内の複数ファイルは同じ作成時刻
- そのままだと全部 `2025-11-17-23-47-27-` になる
- ファイル名が重複してしまう

**理由2: 連番の順序保持**
- 0001 → 0002 → 0003 の順序が重要
- タイムスタンプでもこの順序を維持したい
- +0秒、+1秒、+2秒... で連番を再現

**理由3: ls でのソート順の正確性**
- ls でソートしたときに作成順に並ぶ
- 時系列の流れが一目瞭然

### 導入後の効果
- 移行作業で連番順序が完全保持された
- ls でソートしても正しい順序
- **実際の移行で同時刻コミット問題を見事に回避**
- **時系列性の重要性が実証された**

---

## 全体を通しての設計思想

### 優先順位
1. **トークン削減**（64%削減を目指す）
2. **スケーラビリティ**（250/1000ノート時代への備え）
3. **複数人運用**への親和性
4. **事故防止**（差分確認、理解チェック、承認フロー）

### 避けたアンチパターン
- 情報の二重管理
- 過度な FrontMatter（created は不要）
- AI の勘違いを招く構造
- AI が勝手に実行する仕組み

### 重視した価値観
- **シンプルさの維持**: 「言語化の極致」に忠実
- **AI 協働開発の最適化**: AI が読みやすい構造
- **ドッグフーディング**: 自分たちが使い込んで効果を検証
- **差分確認型の更新**: 何が変わるか理解してから実行

---

**作成日**: 2026-02-02
**作成者**: Claude Sonnet 4.5 with 1ft-seabass
