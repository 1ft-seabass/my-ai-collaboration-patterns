---
tags: [docs-structure, v1.1.0, refactoring-plan, FrontMatter, naming-convention]
---

# 申し送り（2026-01-31 17:30:00）

> **⚠️ 機密情報保護ルール**
>
> この申し送りに記載する情報について:
> - API キー・パスワード・トークンは必ずプレースホルダー(`YOUR_API_KEY`等)で記載
> - 実際の機密情報は絶対に含めない
> - .env や設定ファイルの内容をそのまま転記しない
> - コミット前に git diff で内容を確認
> - プッシュはせずコミットのみ(人間がレビュー後にプッシュ)

## 🔔 Compact前チェックリスト

### トークン使用量の目安
トークン予算の**75-85%**を超えたら申し送り作成を検討しましょう。

- **75%超**: 余裕を持って検討開始
- **85%超**: 早急に申し送り作成
- **100%**: auto compactが発火（文脈が失われる前に記録を！）

> 💡 **トークン使用量の確認方法**
> 会話中に表示される `Token usage: X/Y; Z remaining` を参照
> 例: Claude Codeの場合は予算200,000トークン

### 記録すべき内容を確認
- [x] 現在のセッションで決定した重要事項を記録したか？
- [x] 議論の流れと理由を記録したか？
- [x] 次のセッションで必要な「文脈」「空気感」を言語化したか？
- [x] 技術的な決定の「なぜ」を明記したか？
- [x] 注意事項に新しい学びを追加したか？

---

## 🔍 次のセッション開始時の検証プロトコル

**次のAIへ: セッション開始時に必ず以下を実行してください**

### 1. 前セッションの完了状態を検証
下記の「検証コマンド」を実行し、申し送りの「完了」が実態と一致しているか確認してください。

### 2. 検証結果を人間に報告
- ✅ **全て成功**: 「前セッションの完了状態を確認しました。次は Phase 2 実装から開始します。」
- ⚠️ **失敗あり**: 該当なし（今回は計画のみで実装なし）

### 3. 実態ベースで進める
- 申し送りの「完了」は参考程度
- 検証結果が真実

---

## 🔧 コマンド実行ルール

**次のAIへ: コマンド実行前に必ず確認すること**

### 原則：プロジェクトの標準実行方法を探す
実行前に以下を**順番に確認**してから判断：

1. **package.json** の `scripts` セクション（Node.js系）
2. **Makefile** の targets（`make dev`, `make start` など）
3. **docker-compose.yml** の存在（Docker系）
4. **README.md** の Getting Started / Development セクション
5. **pyproject.toml** / **Cargo.toml** など（他言語）

### 禁止事項
- ❌ 確認なしで勝手にサーバー起動
- ❌ `node src/index.js` のような直接実行（scriptsがある場合）
- ❌ ビルド・DB操作を無断実行

### 推奨手順
```bash
# このプロジェクトは静的なパターン集なので、起動・停止の概念なし
# 必要に応じて degit でテンプレートを配布
```

**理由**: プロジェクトごとに標準的な起動方法が異なるため

---

## 現在の状況

### ✅ 完了: docs-structure v1.1.0 改修計画の策定

**ステータス**: ✅ 完了

**完了内容**:
- ✅ **FrontMatter 導入の是非を決定**
  - tags のみ導入（created は削除）
  - 理由: ファイル名と重複回避、将来的な検索性向上

- ✅ **README vs TEMPLATE の情報集約先を決定**
  - TEMPLATE に集約（README は3-5行の誘導のみ）
  - 理由: AI が読むファイル数を減らす（トークン削減）

- ✅ **命名規則の統一仕様を確定**
  - `yyyy-mm-dd-hh-mm-ss-{title}.md` に統一
  - notes, letters, tasks すべてで同じ形式
  - 理由: 複数人作業での衝突回避、識別性向上

- ✅ **Phase 2 詳細計画の作成**
  - 12ファイルの更新内容を詳細に設計
  - トークン削減効果: 約64%（863行 → 310行）
  - AI 勘違い対策: HTML コメント + セパレーター

- ✅ **改修計画ノートの作成**
  - `docs/notes/0027_docs-structure-v1.0.1-to-v1.1.0-refactoring-plan.md`
  - 568行の詳細な設計書
  - Git コミット完了（6bb2e2a）

**未完了内容**:
- なし（今回は計画策定のみ、実装は次回）

**検証コマンド** (次のセッションのAIが実行):
```bash
# 改修計画ノートが存在することを確認
ls docs/notes/0027_docs-structure-v1.0.1-to-v1.1.0-refactoring-plan.md

# Git コミットを確認
git log --oneline -1
```

**検証が失敗した場合の対処**:
- ノートが見つからない場合 → 申し送りを再確認

---

## 次にやること

1. **最優先: Phase 2 実装（新規稼働用テンプレート更新）**
   - 理由: 改修計画が完成し、実装準備が整った
   - 対象: 12ファイル
   - 参照: `docs/notes/0027_docs-structure-v1.0.1-to-v1.1.0-refactoring-plan.md`

2. **次に: Phase 3（既存ファイル移行）**
   - 理由: Phase 2 完成後に実施
   - 対象: docs/notes/ (26ファイル), docs/letters/ (6ファイル)

3. **その後: Phase 4（派生パターンへの波及）**
   - 理由: Phase 2/3 完成後に実施
   - 対象: docs-structure-for-target-branch-only, writing-collaborate, actions-pattern

## 注意事項

- ⚠️ **Phase 2 実装は慎重に**: 12ファイル更新なので、1つずつ確認しながら進める
- ⚠️ **AI 勘違い対策が重要**: HTML コメント + セパレーターの構造を正確に
- ⚠️ **FrontMatter は tags のみ**: created を入れないこと（ファイル名と重複）
- ⚠️ **README は3-5行のみ**: 情報は TEMPLATE に集約

## 技術的な文脈

- **プロジェクト**: my-ai-collaboration-patterns
- **リポジトリタイプ**: 公開リポジトリ（Claude痕跡なし）
- **対象パターン**: docs-structure (v1.0.1 → v1.1.0)
- **重要ファイル**:
  - `docs/notes/0027_docs-structure-v1.0.1-to-v1.1.0-refactoring-plan.md` (568行の詳細設計)
  - `patterns/docs-structure/templates/` (改修対象のテンプレート群)

---

## セッション文脈サマリー

### 核心的な設計決定

**決定事項1: FrontMatter は tags のみ**
- 理由: created はファイル名と重複、tags は将来的な検索性向上（250/1000ノート時代）
- 影響範囲: notes, letters, tasks の全 TEMPLATE.md

**決定事項2: TEMPLATE に情報集約**
- 理由: AI が読むファイル数を減らす（README + TEMPLATE → TEMPLATE のみ）
- 影響範囲: notes, letters, tasks の全 README.md（3-5行に簡素化）

**決定事項3: 命名規則統一**
- 理由: 複数人作業での衝突回避、時系列明確、識別性向上
- 影響範囲: notes, letters, tasks すべてで `yyyy-mm-dd-hh-mm-ss-{title}.md`

### 議論の流れ

1. **最初の問題認識**: ユーザーから「docs-structure の改修を慎重に進めたい」
2. **検討したアプローチ**:
   - FrontMatter: created + tags vs tags のみ vs 導入しない
   - 情報集約: TEMPLATE vs README vs 現状維持
   - 命名規則: 連番 vs 日時 vs 日時+タイトル
3. **最終決定**: tags のみ、TEMPLATE 集約、日時+タイトル
4. **残った課題**: Phase 2 実装、Phase 3 移行、Phase 4 波及

### 次のセッションに引き継ぐべき「空気感」

**このプロジェクトの優先順位**:
- **トークン削減**が最優先（64%削減を目指す）
- **スケーラビリティ**（250/1000ノート時代への備え）
- **複数人運用**への親和性

**避けるべきアンチパターン**:
- 情報の二重管理（README と TEMPLATE に同じ内容を書く）
- 過度な FrontMatter（created は不要、tags のみ）
- AI の勘違いを招く構造（HTML コメント + セパレーターで対策）

**重視している価値観**:
- **シンプルさの維持**: 「言語化の極致」に忠実
- **AI 協働開発の最適化**: AI が読みやすい構造
- **ドッグフーディング**: 自分たちが使い込んで効果を検証

**現在の開発フェーズ**:
- **計画完成 → 実装準備完了**
- Phase 2 実装が次のステップ
- 慎重に、1ファイルずつ確認しながら進める

---

**作成日時**: 2026-01-31 17:30:00
**作成者**: Claude Sonnet 4.5
