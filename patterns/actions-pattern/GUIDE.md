# actionsパターン - 補足ガイド

> **対象**: AIアシスタント（degit後に読む）
> **目的**: 配置されたactionsディレクトリの意図を理解する

## 📖 このガイドについて

このガイドは、degit で `actions/` ディレクトリを配置した後に読むべき補足資料です。
パターンの哲学と意図を理解することで、より効果的に活用できます。

## 🏗️ 配置された構造

```
actions/
├── README.md                          # actionsディレクトリの説明
├── git_commit_and_push.md             # 例1: Git操作
├── current_create_knowledge.md        # 例2: 知見まとめ
└── simple_start_from_latest_letter.md # 例3: セッション開始
```

新しいタスクは `actions/新しいタスク名.md` として追加できます。

## 🎯 コアコンセプト

### なぜこのパターンが効果的なのか

> **「コードで縛る」= 仕様明確 = 議論不要 = トークン節約**

会話ベースの指示は曖昧さを生み、AIが確認のために質問します。しかし、明確な指示書があれば確認は不要になります。

| 方式 | 特徴 | トークン消費 |
|------|------|-------------|
| **会話ベース** | 曖昧な指示 → 確認の往復 → 説明・報告 | 10,000-15,000 |
| **actionsパターン** | 明確な指示書 → 即実行 → 結果のみ報告 | 3,000-4,000 |
| **削減率** | - | **約70%** |

### action.mdファイルとは

- **明確な指示書**: AIが読んで即座に実行できる具体的な手順
- **再現可能**: 毎回同じ結果を生成
- **小さく保つ**: 1ファイル = 1タスク（5-20行が目安）

### 書き方のコツ

- **具体的に**: 「いい感じに」ではなく「段階的にコミット」
- **ステップ分割**: 複雑なタスクは細かく分解
- **期待を明記**: 「何ができていればOK」を書く

## 🚀 運用開始

### 使い方

Claude Codeなどで以下のように呼び出します：

```
@actions/タスク名.md
```

**例**:
```
@actions/git_commit_and_push.md
```

AIが指示書を読み込み、タスクを即座に実行します。

### 提供されるアクション

- `git_commit_and_push.md` - 進捗のコミットとプッシュ
- `current_create_knowledge.md` - 知見のまとめ作成
- `simple_start_from_latest_letter.md` - セッション開始（申し送りから）

## 🔧 カスタマイズ

### 新しいアクションの追加

1. **タスクを特定**
   - 3回以上繰り返すタスク
   - 手順が決まっているタスク
   - 確認の往復が多いタスク

2. **action.mdを作成**
   ```bash
   touch actions/新しいタスク名.md
   ```

3. **基本構造で記述**
   ```markdown
   # タスク名

   ## 目的
   このタスクが何をするか、なぜ必要か

   ## 実行手順
   1. ステップ1
   2. ステップ2
   3. ステップ3

   ## 期待する結果
   タスク完了時の状態
   ```

4. **README.mdを更新**
   - 利用可能なアクションのリストに追加

### 既存action.mdの編集

プロジェクトの進化に合わせて、既存の指示書を最適化できます。

**編集のポイント**:
- より具体的な手順に変更
- 注意事項を追加
- 期待する結果を明確化

## ✅ 向いているケース

### 使うべき場面

- ✅ 繰り返し実行するタスク
- ✅ 手順が決まっているタスク
- ✅ 複数のステップがあるタスク
- ✅ 確認が不要なタスク

### 使わない方がいい場面

- ❌ 一度きりのタスク
- ❌ 手順が毎回変わるタスク
- ❌ 探索的なタスク
- ❌ 創造的なタスク

## 📊 実測データ

実際の joplin-ai-tools プロジェクトでの測定結果：

| タスク | 会話ベース | actions | 削減率 |
|--------|-----------|---------|--------|
| Git操作 | 6,000 | 1,500 | 75% |
| 知見まとめ | 12,000 | 4,000 | 67% |
| セッション開始 | 8,000 | 2,500 | 69% |
| **平均** | **8,667** | **2,667** | **69%** |

**10回の実行での累計**:
- 会話ベース: 86,670トークン
- actionsパターン: 26,670トークン
- **差**: 60,000トークン節約

## 🎯 期待される効果

このactionsパターンを導入することで：

- ✅ トークン消費を約70%削減
- ✅ 確認の往復がゼロに（即実行）
- ✅ 一貫した品質（毎回同じ結果）
- ✅ チーム全体で共有可能

## 🛠️ ベストプラクティス

### 1. 小さく始める

**最初から完璧を目指さない**:
- まず3つのaction.mdを作成
- 使いながら改善
- 効果を確認してから拡大

**おすすめの最初の3つ**:
1. `git_commit_and_push.md` - Git操作
2. `session_start.md` - セッション開始
3. `create_note.md` - ノート作成

### 2. 繰り返し使って改善

**PDCAサイクル**:
1. **Plan**: action.mdを作成
2. **Do**: 実際に使ってみる
3. **Check**: 効果を確認（トークン数、時間）
4. **Act**: 改善点を反映

### 3. チームで共有

`actions/` ディレクトリをGit管理することで、チーム全体で同じタスク定義を共有できます。

```bash
git add actions/
git commit -m "feat: add actions pattern"
git push
```

**メリット**:
- ベストプラクティスの標準化
- 新メンバーのオンボーディング効率化
- 属人化の防止

### 4. ドキュメントと連携

**docs-structureパターンとの組み合わせ**:
- `actions/session_start.md` で申し送りを自動読み込み
- `actions/create_note.md` でノート作成を自動化
- `actions/create_adr.md` でADR作成を自動化

## 🙋 よくある質問

**Q: AIが指示書を無視する場合は？**

**解決策**:
1. 指示をより具体的に記述
2. 曖昧な表現（「いい感じに」など）を避ける
3. 期待する結果を明確に書く

**Q: トークン削減効果が感じられない**

**解決策**:
1. タスクを分割
2. 小さなaction.mdに分ける
3. 1ファイル = 1タスクの原則を守る

**Q: action.mdファイルが多すぎて管理できない**

**解決策**:
カテゴリ別にサブディレクトリを作成

```
actions/
├── README.md
├── git/                    # Git関連
│   ├── commit_and_push.md
│   └── tag.md
├── knowledge/              # 知見管理
│   ├── create_note.md
│   └── create_adr.md
└── session/                # セッション管理
    ├── start.md
    └── end.md
```

## 📚 さらに詳しく

- [README.md](./README.md) - このパターンの詳細説明（人間向け）
- [WHY.md](./WHY.md) - なぜこのパターンが効果的なのか（詳細分析）
- [examples/](./examples/) - 具体的な使用例

---

**次のステップ**: プロジェクトで頻繁に行うタスクを特定し、最初の3つのaction.mdを作成してください
