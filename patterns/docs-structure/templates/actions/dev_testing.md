# テスト作成（ガードレール）

指定範囲のテストを作成してください。

## 目的

- リファクタ前のガードレール
- 今の挙動を保証する
- 安心してコード改善できる状態を作る

## やること

- 入出力が明確な箇所からテストを書く
- 主要なパス（正常系）を優先
- 境界値・エラー系は次点

## 優先順位

1. **ユーティリティ関数**：入出力が明確で独立している
2. **ビジネスロジック**：計算や判定など純粋な処理
3. **API エンドポイント**：リクエスト・レスポンスが明確
4. **複雑な条件分岐**：バグが混入しやすい箇所

## ルール

- テストは対象ファイルと同階層に `.test.{拡張子}` で作成
- 例：`utils.ts` → `utils.test.ts`
- テストフレームワークはプロジェクトの標準に従う

## やらないこと

- E2Eテスト（重すぎる）
- 設計が不安定な箇所のテスト（変更で壊れる）
- 過度なカバレッジ追求（主要パスで十分）

## 推奨フロー

```
1. リファクタしたい箇所を特定
2. @actions/dev_testing.md でテスト作成
3. テストが通ることを確認
4. @actions/dev_refactoring.md で安心してリファクタ
5. テストが通り続けることを確認
```

## テストの現実

- E2Eは大変すぎる
- 開発中のユニットテストは設計変更で壊れる
- 一区切り後にガードレールとして書くのが現実的

この認識のもと、**必要最小限で効果的なテスト**を作成します。
